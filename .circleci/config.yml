version: 2
jobs:
  build:
    machine: true
    steps:
      - checkout
      - run: make pull-builder
      - run: make
  unit and integration tests:
    machine: true
    steps:
      - checkout
      - run: make pull-builder
      - run: make test
  e2e tests:
    machine: true
    steps:
      - checkout
      - run: make pull
      - run: make kubectl
      - run: make crictl
      - run: make e2e
workflows:
  version: 2
  test:
    jobs:
      - build
      - unit and integration tests
      - e2e tests
